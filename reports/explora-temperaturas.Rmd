---
title: "Temperatura JP x CG"
output:
    html_document:
    df_print: paged
theme: sandstone
---

```{r echo=FALSE, message=FALSE, warning=FALSE}
library(tidyverse)
library(here)
library(lubridate)
library(ggbeeswarm)
theme_set(theme_bw())
```

```{r read}
climas = read_csv(here::here("data/clima_cg_jp-semanal.csv"), 
                  col_types = "cTdddddd")

glimpse(climas)
```

## Temperatura

### Onde é mais quente?


### As temperaturas máximas semanais (o pico do calor) são tão diferentes quanto as médias? Mais?  


### Quais os meses mais quentes e mais frios? 
```{r}
climas %>% 
    group_by(mes) %>%
    summarise(tmes = mean(tmedia)) %>% 
    ggplot(aes(x = factor(mes), y = tmes, group=1)) +
    geom_line(size = 1, color="steelblue")+
    geom_point(size = 0.2, color="steelblue")+
    geom_hline(size=0.3, col="red", aes(yintercept=mean(climas$tmedia))) + 
    xlab("Mês") + ylab("Temperatura ºC")
```


### Qual foi o São João  mais frio de CG que está nos nossos dados?

```{r}
climas %>% 
    filter(mes == 6) %>%
    group_by(ano) %>%
    summarise(tmes = mean(tmedia)) %>% 
    top_n(n = -5, wt = tmes) %>%
    ggplot(aes(x = factor(ano), y = tmes), group=1) +
    geom_point(size=4, color="steelblue") +
    xlab("Ano") + ylab("Temperatura ºC")
```


## Chuva

### Quanto chove por semana em JP e CG?

Como é a distribuição do volume de chuvas por semana em JP e CG? A chuva varia mais ou menos que a temperatura? O formato da distribuição é igual? 

### No geral, onde chove mais?

```{r}
climas %>% 
    ggplot(aes(x = tmax, fill = cidade)) + 
    geom_density(alpha = .4)
```

### A distribuição é diferente em meses específicos? 
```{r}
climas %>% 
    group_by(mes) %>%
    summarise(cmes = mean(chuva)) %>% 
    ggplot(aes(x = factor(mes), y = cmes, group=1)) +
    geom_area(size = 1, fill="steelblue", alpha = 0.5)+
    geom_hline(size=0.3, col="darkblue", aes(yintercept=mean(climas$chuva))) + 
    xlab("Mês") + ylab("Chuva")
```

